<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.semi.mapper.LoginMapper">


	<insert id="insertUser" parameterType="UserDto">
		insert into user (uname,age,gender,email,pass,hp,city1,city2,category,joinday) values
		(#{uname},#{age},#{gender},#{email},#{pass},#{hp},#{city1},#{city2},#{category},now())
	</insert>
	
	<select id="isEqualPassEmail" parameterType="Map" resultType="int">
		select count(*) from user where email=#{email} and pass=#{pass}
	</select>
	
	<select id="selectOneOfEmail" parameterType="String" resultType="UserDto">
		select * from user where email=#{email}
	</select>

	<select id="overlappedEmail" parameterType="UserDto" resultType="int">
		select count(email) from user where email=#{email}
	</select>
	
<!-- 마이페이지 -->


	<select id="getMyProfilePhotos" resultType="UserPhotoDto">
	  SELECT * FROM user_photo WHERE unum = #{unum}
	</select>
	<select id="getMypage" parameterType="int" resultType="UserDto">
		select * from user where unum=#{unum}
	</select>
	
	<select id="getAllUsers" resultType="UserDto">
		select * from user order by unum asc
	</select>

	<select id="getTotalCount" resultType="int">
		select count(*) from user
	</select>

	<insert id="insertMyPhoto" parameterType="UserPhotoDto">
	  insert into user_photo (unum, file_name) values
	  (#{unum}, #{file_name})
	</insert>
</mapper>